<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lock Puzzle Game</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { margin: 0; padding: 0; }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect } = React;
        
        // Lucide React icons as simple components
        const Lock = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <rect width="18" height="11" x="3" y="11" rx="2" ry="2"/>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
            </svg>
        );
        
        const Check = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <polyline points="20,6 9,17 4,12"/>
            </svg>
        );
        
        const X = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M18 6 6 18"/>
                <path d="M6 6l12 12"/>
            </svg>
        );
        
        const RotateCcw = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/>
                <path d="M3 3v5h5"/>
            </svg>
        );

        const LockPuzzleGame = () => {
          const [userGuess, setUserGuess] = useState(['', '', '']);
          const [attempts, setAttempts] = useState([]);
          const [isComplete, setIsComplete] = useState(false);
          const [showHint, setShowHint] = useState(false);
          
          // The correct answer is encoded to prevent easy cheating
          const encodedAnswer = 'MTUz'; // Base64 encoded
          const correctAnswer = atob(encodedAnswer).split('');
          
          // Clues from the image
          const clues = [
            { digits: ['3', '1', '7'], hint: 'رقمان صحيحان ولكن في المكان الخطأ', translation: 'Two digits correct but in wrong place' },
            { digits: ['8', '4', '9'], hint: 'لا شيء صحيح', translation: 'Nothing is correct' },
            { digits: ['8', '9', '1'], hint: 'رقم واحد صحيح ولكن في المكان الخطأ', translation: 'One digit correct but in wrong place' },
            { digits: ['7', '9', '3'], hint: 'رقم واحد صحيح وفي المكان الصحيح', translation: 'One digit correct and in right place' },
            { digits: ['7', '2', '5'], hint: 'رقم واحد صحيح ولكن في المكان الخطأ', translation: 'One digit correct but in wrong place' }
          ];

          const handleDigitChange = (index, value) => {
            if (value.length <= 1 && /^[0-9]*$/.test(value)) {
              const newGuess = [...userGuess];
              newGuess[index] = value;
              setUserGuess(newGuess);
            }
          };

          const checkAnswer = () => {
            if (userGuess.every(digit => digit !== '')) {
              const isCorrect = userGuess.every((digit, index) => digit === correctAnswer[index]);
              
              const newAttempt = {
                guess: [...userGuess],
                correct: isCorrect,
                timestamp: new Date().toLocaleTimeString()
              };
              
              setAttempts([...attempts, newAttempt]);
              
              if (isCorrect) {
                setIsComplete(true);
              }
            }
          };

          const resetGame = () => {
            setUserGuess(['', '', '']);
            setAttempts([]);
            setIsComplete(false);
            setShowHint(false);
          };

          return React.createElement('div', {
            className: "min-h-screen bg-gradient-to-br from-slate-800 to-slate-900 flex items-center justify-center p-4"
          }, 
            React.createElement('div', {
              className: "bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full"
            },
              // Header
              React.createElement('div', {
                className: "text-center mb-8"
              },
                React.createElement('div', {
                  className: "flex justify-center mb-4"
                },
                  React.createElement('div', {
                    className: "bg-slate-700 p-4 rounded-full"
                  },
                    React.createElement(Lock, {
                      size: 48,
                      className: "text-white"
                    })
                  )
                ),
                React.createElement('h1', {
                  className: "text-2xl font-bold text-slate-800 mb-2"
                }, 'هل تستطيع فتح القفل؟'),
                React.createElement('p', {
                  className: "text-slate-600"
                }, 'Can you open the lock?')
              ),

              // Input Section
              React.createElement('div', {
                className: "mb-6"
              },
                React.createElement('div', {
                  className: "flex justify-center gap-4 mb-4"
                },
                  ...userGuess.map((digit, index) =>
                    React.createElement('input', {
                      key: index,
                      type: "text",
                      value: digit,
                      onChange: (e) => handleDigitChange(index, e.target.value),
                      className: "w-16 h-16 text-2xl font-bold text-center border-2 border-slate-300 rounded-lg focus:border-blue-500 focus:outline-none",
                      maxLength: "1",
                      disabled: isComplete
                    })
                  )
                ),
                React.createElement('div', {
                  className: "flex gap-2 justify-center"
                },
                  React.createElement('button', {
                    onClick: checkAnswer,
                    disabled: userGuess.some(digit => digit === '') || isComplete,
                    className: "bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-6 py-2 rounded-lg font-semibold transition-colors"
                  }, 'تحقق / Check'),
                  React.createElement('button', {
                    onClick: resetGame,
                    className: "bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg font-semibold transition-colors"
                  },
                    React.createElement(RotateCcw, { size: 20 })
                  )
                )
              ),

              // Success Message
              isComplete && React.createElement('div', {
                className: "bg-green-100 border-2 border-green-400 rounded-lg p-4 mb-6 text-center"
              },
                React.createElement(Check, {
                  className: "mx-auto mb-2 text-green-600",
                  size: 32
                }),
                React.createElement('p', {
                  className: "text-green-800 font-bold"
                }, '🎉 مبروك! فتحت القفل!'),
                React.createElement('p', {
                  className: "text-green-700"
                }, 'Congratulations! You opened the lock!')
              ),

              // Clues Section
              React.createElement('div', {
                className: "mb-6"
              },
                React.createElement('h3', {
                  className: "text-lg font-bold text-slate-800 mb-4 text-center"
                }, 'القرائن / Clues'),
                React.createElement('div', {
                  className: "space-y-3"
                },
                  ...clues.map((clue, index) =>
                    React.createElement('div', {
                      key: index,
                      className: "bg-slate-50 rounded-lg p-3"
                    },
                      React.createElement('div', {
                        className: "flex justify-center gap-2 mb-2"
                      },
                        ...clue.digits.map((digit, digitIndex) =>
                          React.createElement('div', {
                            key: digitIndex,
                            className: "w-10 h-10 bg-white border-2 border-slate-300 rounded flex items-center justify-center font-bold text-slate-700"
                          }, digit)
                        )
                      ),
                      React.createElement('p', {
                        className: "text-sm text-slate-600 text-center font-semibold"
                      }, clue.hint),
                      React.createElement('p', {
                        className: "text-xs text-slate-500 text-center"
                      }, clue.translation)
                    )
                  )
                )
              ),

              // Attempts History
              attempts.length > 0 && React.createElement('div', {
                className: "mb-4"
              },
                React.createElement('h3', {
                  className: "text-lg font-bold text-slate-800 mb-2"
                }, 'المحاولات / Attempts'),
                React.createElement('div', {
                  className: "space-y-2 max-h-32 overflow-y-auto"
                },
                  ...attempts.slice(-5).map((attempt, index) =>
                    React.createElement('div', {
                      key: index,
                      className: "flex items-center gap-2 text-sm"
                    },
                      React.createElement('div', {
                        className: "flex gap-1"
                      },
                        ...attempt.guess.map((digit, digitIndex) =>
                          React.createElement('span', {
                            key: digitIndex,
                            className: "w-6 h-6 bg-slate-200 rounded text-center text-xs flex items-center justify-center"
                          }, digit)
                        )
                      ),
                      attempt.correct ? 
                        React.createElement(Check, {
                          size: 16,
                          className: "text-green-600"
                        }) :
                        React.createElement(X, {
                          size: 16,
                          className: "text-red-600"
                        }),
                      React.createElement('span', {
                        className: "text-slate-500"
                      }, attempt.timestamp)
                    )
                  )
                )
              ),

              // Hint Button
              React.createElement('div', {
                className: "text-center"
              },
                React.createElement('button', {
                  onClick: () => setShowHint(!showHint),
                  className: "text-blue-600 hover:text-blue-800 text-sm underline"
                }, showHint ? 'إخفاء التلميح / Hide Hint' : 'إظهار التلميح / Show Hint'),
                showHint && React.createElement('div', {
                  className: "mt-2 p-3 bg-yellow-50 border border-yellow-200 rounded-lg text-sm"
                },
                  React.createElement('p', {
                    className: "text-yellow-800"
                  }, '💡 فكر في كل قرينة بعناية. ابدأ بالقرائن التي تعطي معلومات أكثر تحديداً.'),
                  React.createElement('p', {
                    className: "text-yellow-700 text-xs mt-1"
                  }, 'Think about each clue carefully. Start with clues that give more specific information.')
                )
              )
            )
          );
        };

        ReactDOM.render(React.createElement(LockPuzzleGame), document.getElementById('root'));
    </script>
</body>
</html>
